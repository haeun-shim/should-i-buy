# Should I Buy? 🛒

**"살까 말까 10초 안에 결론 내주는 소비 판단기"**

충동구매를 방지하고 합리적인 소비 습관을 만들어주는 AI 기반 의사결정 도구입니다.

## 📌 프로젝트 개요

- **이름**: Should I Buy? (살까말까 엔진)
- **목표**: 8가지 질문을 통해 소비 판단을 객관적으로 분석하고 합리적인 결론 제공
- **주요 기능**:
  - 🎯 8가지 질문 기반 소비 판단
  - 📊 필요성, 후회 위험, 예산 부담, 중복/유지비 점수 계산
  - ✅ 3단계 결론 (구매 OK / 48시간 보류 / 구매 비추천)
  - 💬 AI 코멘트로 상세한 이유 설명
  - 📝 소비 판단 기록 저장 및 대시보드

## 🌐 URLs

- **샌드박스 테스트**: https://3000-isq73layem4w7421edtqz-2b54fc91.sandbox.novita.ai
- **Production** (배포 후 업데이트 예정): TBD
- **GitHub** (저장소 생성 후 업데이트 예정): TBD

## 🎯 완료된 기능

### ✅ 1. 대시보드 (`/`)
- 최근 소비 판단 내역 리스트 표시
- 항목명, 가격, 결론, 카테고리, 총점 한눈에 확인
- 클릭 시 상세 결과 페이지로 이동
- 새 소비 판단하기 버튼

### ✅ 2. 새 소비 판단 (`/new`)
- **기본 정보 입력**:
  - 항목 이름 (텍스트)
  - 가격 (숫자)
  - 카테고리 (필수/업무/취미/기타)

- **8가지 질문**:
  1. Q1: 없으면 얼마나 불편해? (슬라이더 0-5)
  2. Q2: 비슷한 물건 있어? (예/아니오)
  3. Q3: 3개월 뒤에도 주 1회 이상 쓸까? (슬라이더 0-5)
  4. Q4: 예산 부담은? (슬라이더 0-5)
  5. Q5: 지금 내 감정 상태는? (평온/스트레스/우울/텐션 업)
  6. Q6: 구매 계기는? (실제 필요/지인 추천/광고/그냥 눈에 띄어서)
  7. Q7: 1-2주 뒤에 사도 괜찮아? (예/아니오)
  8. Q8: 추가 유지비 있어? (예/아니오/잘 모르겠음)

### ✅ 3. 결과 페이지 (`/result/:id`)
- **결론 카드**: 이모지와 함께 명확한 결론 표시
- **점수 상세**:
  - 필요성 점수 (N): Q1 * 2 + Q3 * 1.5 + 중복 보너스
  - 후회 위험 (R): 감정 상태 + 구매 계기 + 대기 가능 여부
  - 예산 부담 (B): Q4 * 2
  - 중복/유지비 (D): 비슷한 물건 + 추가 비용
  - 총점 (T): N - R - B - D
- **AI 코멘트**: 점수 근거를 자세히 설명
- **액션**: 대시보드 이동, 새로 판단하기, 삭제

### ✅ 4. RESTful API
- `GET /api/decisions` - 전체 기록 조회
- `GET /api/decisions/:id` - 특정 기록 조회
- `POST /api/decisions` - 새 판단 생성
- `DELETE /api/decisions/:id` - 기록 삭제

## 🏗️ 데이터 아키텍처

### 데이터 모델
```typescript
PurchaseDecision {
  // 기본 정보
  id: number
  item_name: string
  price: number
  category: '필수' | '업무' | '취미' | '기타'
  
  // 질문 답변 (Q1-Q8)
  q1_necessity: number (0-5)
  q2_has_similar: '예' | '아니오'
  q3_future_use: number (0-5)
  q4_budget_burden: number (0-5)
  q5_emotional_state: '평온' | '스트레스' | '우울' | '텐션 업'
  q6_purchase_trigger: '실제 필요' | '지인 추천' | '광고·SNS 보고' | '그냥 눈에 띄어서'
  q7_can_wait: '예' | '아니오'
  q8_maintenance_cost: '예' | '아니오' | '잘 모르겠음'
  
  // 계산된 점수
  necessity_score: number
  regret_risk: number
  budget_burden: number
  duplicate_cost: number
  total_score: number
  
  // 결론 및 코멘트
  conclusion: '구매 OK' | '48시간 보류' | '구매 비추천'
  comments: string
  
  // 타임스탬프
  created_at: string
  updated_at: string
}
```

### 저장소 서비스
- **Cloudflare D1**: SQLite 기반 관계형 데이터베이스
- **로컬 개발**: `.wrangler/state/v3/d1` 디렉토리에 로컬 SQLite 사용
- **프로덕션**: Cloudflare D1 클라우드 데이터베이스

### 데이터 흐름
1. 사용자가 `/new` 페이지에서 8가지 질문 답변
2. 프론트엔드가 `POST /api/decisions` 호출
3. 백엔드의 `scoreCalculator.ts`가 점수 계산 알고리즘 실행
4. D1 데이터베이스에 결과 저장
5. 생성된 ID로 `/result/:id` 페이지 리다이렉트
6. 대시보드에서 모든 기록 조회 가능

## 🧮 점수 계산 알고리즘

```
필요성 점수 (N) = Q1 * 2 + Q3 * 1.5 + (Q2=="아니오" ? 3 : 0)
후회 위험 (R) = 감정상태 가중치 + 구매계기 가중치 + (Q7=="아니오" ? -2 : 2)
예산 부담 (B) = Q4 * 2
중복/유지비 (D) = (Q2=="예" ? 3 : 0) + (Q8=="예" ? 2 : "잘 모르겠음" ? 1 : 0)

총점 (T) = N - R - B - D

결론:
- T >= 5 → ✅ 구매 OK (합리적인 소비)
- 0 <= T < 5 → ⏳ 48시간 보류 (신중히 고민)
- T < 0 → ❌ 구매 비추천 (후회 가능성 높음)
```

### 감정 상태 가중치
- 평온: 0
- 스트레스: 3
- 우울: 4
- 텐션 업: 3

### 구매 계기 가중치
- 실제 필요: 0
- 지인 추천: 1
- 광고·SNS 보고: 3
- 그냥 눈에 띄어서: 4

## 📖 사용자 가이드

### 1. 새 소비 판단하기
1. 대시보드에서 "새 소비 판단하기" 버튼 클릭
2. 구매하려는 물건 정보 입력 (이름, 가격, 카테고리)
3. 8가지 질문에 솔직하게 답변
4. "판단하기" 버튼 클릭
5. 10초 안에 결과 확인!

### 2. 결과 해석하기
- **✅ 구매 OK**: 합리적인 소비입니다. 자신감 있게 구매하세요!
- **⏳ 48시간 보류**: 조금 더 신중하게 고민해보세요. 48시간 후 다시 생각해보면 더 명확한 답이 나올 수 있습니다.
- **❌ 구매 비추천**: 후회할 가능성이 높습니다. 다른 대안을 찾거나 구매를 미루는 것이 좋겠습니다.

### 3. 과거 기록 확인하기
- 대시보드에서 과거 소비 판단 기록들을 확인할 수 있습니다
- 각 기록을 클릭하면 상세 결과를 다시 볼 수 있습니다
- 불필요한 기록은 삭제할 수 있습니다

## 🚀 배포 상태

- **플랫폼**: Cloudflare Pages + Cloudflare D1
- **현재 상태**: ✅ 로컬 개발 완료, 샌드박스 테스트 가능
- **Tech Stack**:
  - Backend: Hono (Cloudflare Workers)
  - Frontend: Vanilla JavaScript + Tailwind CSS
  - Database: Cloudflare D1 (SQLite)
  - Deployment: Cloudflare Pages
- **마지막 업데이트**: 2025-12-03

## 🔨 로컬 개발

### 필수 조건
- Node.js 18+
- npm

### 설치 및 실행
```bash
# 의존성 설치
npm install

# 데이터베이스 마이그레이션
npm run db:migrate:local

# 샘플 데이터 삽입
npm run db:seed

# 빌드
npm run build

# 개발 서버 시작 (PM2)
pm2 start ecosystem.config.cjs

# 테스트
curl http://localhost:3000
```

### 유용한 명령어
```bash
# 데이터베이스 초기화
npm run db:reset

# 로컬 D1 콘솔
npm run db:console:local

# 포트 정리
npm run clean-port

# Git 커밋
npm run git:commit "message"
```

## 📋 아직 구현되지 않은 기능

### 추가 예정 기능
1. **사용자 인증**: 개인별 소비 기록 관리
2. **통계 대시보드**: 
   - 월별/카테고리별 소비 분석
   - 충동구매 방지 성공률
   - 절약한 금액 계산
3. **알림 기능**: 48시간 보류 항목 리마인더
4. **친구 공유**: 소비 판단 결과를 친구에게 공유
5. **예산 설정**: 월간 예산 설정 및 추적
6. **모바일 앱**: React Native로 모바일 앱 버전

### 개선 예정 사항
1. **점수 알고리즘 정밀화**: 더 많은 데이터로 가중치 최적화
2. **반응형 디자인 개선**: 모바일 UX 개선
3. **다국어 지원**: 영어, 일본어 등 다국어 지원
4. **다크 모드**: 야간 사용을 위한 다크 모드

## 🔜 권장 다음 단계

1. **Cloudflare Pages 배포**: 프로덕션 환경에 정식 배포
2. **D1 프로덕션 데이터베이스**: 클라우드 D1 데이터베이스 생성 및 마이그레이션
3. **GitHub 저장소 연동**: 코드 공유 및 버전 관리
4. **사용자 피드백 수집**: 실제 사용자 의견 반영
5. **A/B 테스트**: 점수 계산 알고리즘 최적화

## 🎨 디자인 철학

- **심플함**: 복잡한 설정 없이 즉시 사용 가능
- **직관적**: 누구나 이해할 수 있는 질문과 결과
- **객관적**: 감정이 아닌 데이터 기반 의사결정
- **친근함**: 따뜻한 색상과 이모지로 친근한 UI

## 📄 라이선스

MIT License

## 👩‍💻 개발자

- **하은님**을 위한 맞춤형 소비 판단 도구
- 임상팀 전문가의 데이터 기반 사고방식을 반영
- 폴댄스, 클라이밍, AI 탐구에 이어 합리적 소비 습관까지!

---

**💡 Tip**: 충동구매가 고민이라면, 지금 바로 Should I Buy?로 당신의 소비를 점검해보세요!
